/*
	Dimension by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
*/
const translations = {
	en: {
		suites: "Suites",
		experience: "Experience",
		gallery: "Gallery",
		contact: "Contact Us",
		introText: "Enjoy elegance and breathtaking sea views from our luxury suites, in the serene beauty of Kantouni, Kalymnos.",
		sendMessage: "Send Message",
		reset: "Reset",

		// Experience section
		experience_1_Title:"Climbing Adventures",
		experience_1_description:"Kalymnos is a climber’s paradise, world-renowned for its rugged limestone cliffs and an endless variety of routes suitable for both beginners and seasoned pros. With over 3,400 bolted climbing routes, the island offers breathtaking panoramas of the Aegean Sea from every height. Whether you're tackling a steep overhang or enjoying a sunset climb on a seaside crag, the combination of sport and scenery makes each ascent unforgettable. Professional climbing schools and gear rentals are available year-round, ensuring a safe and thrilling adventure.",
		experience_2_Title:"Crystal Clear Waters",
		experience_2_description:"The island is surrounded by pristine, turquoise waters that invite you to dive in and explore. Swim in secluded coves, snorkel through vibrant underwater ecosystems, or dive into sea caves filled with marine life. Kalymnos also boasts several organized beaches like Masouri and Kantouni, perfect for families or those seeking comfort. If you're feeling adventurous, hop on a boat tour to nearby islets like Telendos or Pserimos for a private beach experience you’ll never forget.",
		experience_3_Title:"Sponge Diving Heritage",
		experience_3_description:"Kalymnos has a rich and unique history as the \"island of sponge divers.\" For centuries, its brave divers journeyed into the deep sea to collect natural sponges — a tradition that shaped the island's economy, culture, and identity. Visit the Sponge Factory Museum in Pothia to see authentic diving suits, tools, and hear incredible stories of this ancient craft. Many family-run sponge shops still sell high-quality natural sponges, making for a meaningful and sustainable souvenir.",
		experience_4_Title:"Local Cuisine",
		experience_4_description:"Kalymnos is not just about stunning views and thrilling adventures; it’s also a culinary delight. The island's cuisine is a blend of traditional Greek flavors with a local twist. Enjoy fresh seafood caught daily, homemade pasta, and local cheeses. Don’t miss out on the island's famous \"Kavourmas,\" a unique dish made from local crab. Pair your meal with a glass of local wine or ouzo for an authentic dining experience. Many tavernas offer stunning sea views, making your meal even more special.",

		//Suites section
		suite1_Title1: "Relaxed Island Living, Reimagined",
		suite1_description1: "Step inside your light-filled one-bedroom apartment, where comfort meets Mediterranean style. Featuring a queen bed and thoughtful design details like natural wood accents and soft lighting, it’s a peaceful retreat after a day of exploring the island.",
		suite1_Title2: "Cook, Dine, and Feel at Home",
		suite1_description2: "Your private kitchen has everything you need—stovetop, oven, refrigerator, kettle, and a Nespresso-style coffee machine. Whether it’s breakfast before a swim or dinner with a view, enjoy the flexibility of dining in with a view of Patela just beyond the windows.",
		suite1_Title3: "All You Need, Seamlessly Included",
		suite1_description3: "From plush towels and bathrobes to air conditioning, fast Wi-Fi, and a flat-screen TV with streaming, every comfort is covered. The apartment also includes a private entrance, stylish patio seating, and calming coastal decor—ideal for couples, solo travelers, or small families.",
		suite1_Title4: "Breathtaking Balcony Views – Kalymnos, Greece",
		suite1_description4: "Wake up to sweeping views of the Aegean Sea and the striking Patela landscape, right from your private balcony. Located on the beautiful island of Kalymnos, this serene outdoor space is perfect for morning coffee or evening wine, surrounded by natural beauty and ocean breeze.",

		suite2_Title1: "Modern Boho Elegance Meets Island Comfort",
		suite2_description1:"Step into a beautifully elevated sleeping space designed with natural textures and airy tones. Bamboo elements, ambient lighting, and curated open shelving create a stylish yet tranquil atmosphere—perfect for unwinding after a sun-drenched day on Kalymnos.",
		suite2_Title2: "Panoramic Seaside Balcony Moments",
		suite2_description2:"Let your morning begin or your evening unwind on a spacious private balcony with stunning views of the turquoise Aegean Sea. With elegant outdoor seating and lush touches, it’s the ideal spot to sip, relax, and take in the gentle sea breeze and rocky coastal charm.",
		suite2_Title3: "Your Cozy Lounge by the Sea",
		suite2_description3:"Enjoy quiet moments in the cozy lounge area featuring soft neutral tones, handcrafted decor, and a rustic-chic coffee table. The calming palette and textures echo the laid-back vibe of island life, making it feel like home the moment you arrive.",
		suite2_Title4: "A Thoughtfully Equipped Island Kitchen",
		suite2_description4:"Cook and dine with ease in a bright, open kitchen complete with modern appliances, elegant hanging lights, and tasteful wooden finishes. Whether preparing local produce or enjoying a glass of wine at the counter, the space blends functionality with effortless style."
	},
	gr: {
		suites: "Δωμάτια",
		experience: "Εμπειρίες",
		gallery: "Γκαλλερί",
		contact: "Επικοινωνια",
		introText: "Απολαύστε την μαγευτική θέα στη θάλασσα από τις πολυτελείς σουίτες μας, στην ομορφιά του Καντουνίου, Καλύμνου.",
		sendMessage: "Αποστολή Μηνύματος",
		reset: "Επαναφορά",

		// Experience section
		experience_1_Title:"Περιπέτειες Αναρρίχησης",
		experience_1_description:"Η Κάλυμνος είναι ένας παράδεισος για τους αναρριχητές, παγκοσμίως γνωστή για τους τραχείς ασβεστολιθικούς βράχους της και την ατελείωτη ποικιλία διαδρομών κατάλληλων για αρχάριους και έμπειρους. Με πάνω από 3.400 διαδρομές αναρρίχησης, το νησί προσφέρει εκπληκτική θέα στο Αιγαίο Πέλαγος από κάθε ύψος. Είτε αντιμετωπίζετε μια απότομη κλίση είτε απολαμβάνετε μια αναρρίχηση στο ηλιοβασίλεμα σε έναν θαλάσσιο βράχο, ο συνδυασμός του αθλήματος και του τοπίου κάνει κάθε ανάβαση αξέχαστη. Επαγγελματικές σχολές αναρρίχησης και ενοικιάσεις εξοπλισμού είναι διαθέσιμες όλο το χρόνο, εξασφαλίζοντας μια ασφαλή και συναρπαστική περιπέτεια.",
		experience_2_Title:"Κρυστάλλινα Νερά",
		experience_2_description:"Το νησί περιβάλλεται από καθαρά, τιρκουάζ νερά που σας προσκαλούν να βουτήξετε και να εξερευνήσετε. Κολυμπήστε σε απομονωμένους όρμους, κάντε snorkeling μέσα από ζωντανά υποβρύχια οικοσυστήματα ή βουτήξτε σε θαλάσσιες σπηλιές γεμάτες θαλάσσια ζωή. Η Κάλυμνος διαθέτει επίσης αρκετές οργανωμένες παραλίες όπως η Μασούρι και το Καντούνι, ιδανικές για οικογένειες ή όσους αναζητούν άνεση. Εάν νιώθετε περιπετειώδεις, επιβιβαστείτε σε μια εκδρομή με σκάφος προς τα κοντινά νησάκια όπως η Τέλενδος ή η Ψέριμος για μια ιδιωτική εμπειρία παραλίας που δεν θα ξεχάσετε ποτέ.",
		experience_3_Title:"Κληρονομιά Σπογγαλιείας",
		experience_3_description:"Η Κάλυμνος έχει μια πλούσια και μοναδική ιστορία ως το \"νησί των σπογγαλιέων.\" Για αιώνες, οι γενναίοι δύτες της ταξίδευαν στα βαθιά νερά για να συλλέξουν φυσικά σφουγγάρια — μια παράδοση που διαμόρφωσε την οικονομία, τον πολιτισμό και την ταυτότητα του νησιού. Επισκεφθείτε το Μουσείο Σπογγαλιείας στην Πόθια για να δείτε αυθεντικές στολές κατάδυσης, εργαλεία και να ακούσετε απίστευτες ιστορίες αυτού του αρχαίου επαγγέλματος. Πολλά οικογενειακά καταστήματα σπογγαλιείας πωλούν ακόμα υψηλής ποιότητας φυσικά σφουγγάρια, κάνοντάς τα ένα σημαντικό και βιώσιμο σουβενίρ.",
		experience_4_Title:"Τοπική Κουζίνα",
		experience_4_description:"Η Κάλυμνος δεν είναι μόνο για εκπληκτική θέα και συναρπαστικές περιπέτειες, αλλά και για γαστρονομικές απολαύσεις. Η κουζίνα του νησιού είναι ένας συνδυασμός παραδοσιακών ελληνικών γεύσεων με τοπική πινελιά. Απολαύστε φρέσκα θαλασσινά που αλιεύονται καθημερινά, σπιτικά ζυμαρικά και τοπικά τυριά. Μην χάσετε το διάσημο \"Καβουρμά\" του νησιού, ένα μοναδικό πιάτο φτιαγμένο από τοπικό καβούρι. Συνοδέψτε το γεύμα σας με ένα ποτήρι τοπικό κρασί ή ούζο για μια αυθεντική γευστική εμπειρία. Πολλές ταβέρνες προσφέρουν εκπληκτική θέα στη θάλασσα, κάνοντάς το γεύμα σας ακόμα πιο ξεχωριστό.",

		//Suites section
		suite1_Title1: "Χαλαρή Νησιώτικη Ζωή",
		suite1_description1: "Μπείτε στο φωτεινό σας διαμέρισμα ενός υπνοδωματίου, όπου η άνεση συναντά το μεσογειακό στυλ. Με ένα διπλό κρεβάτι και προσεγμένες λεπτομέρειες όπως φυσικό ξύλο και απαλός φωτισμός, προσφέρει ένα ήσυχο καταφύγιο μετά από μια μέρα εξερεύνησης του νησιού.",
		suite1_Title2: "Μαγειρέψτε, Δειπνήστε και Νιώστε Σαν στο Σπίτι Σας",
		suite1_description2: "Η ιδιωτική σας κουζίνα διαθέτει ό,τι χρειάζεστε—εστίες, φούρνο, ψυγείο, βραστήρα και μηχανή καφέ τύπου Nespresso. Είτε πρόκειται για πρωινό πριν τη βουτιά είτε για δείπνο με θέα, απολαύστε την ευελιξία του να δειπνείτε με φόντο την Πατέλα έξω από το παράθυρό σας.",
		suite1_Title3: "Όλα Όσα Χρειάζεστε, Περιλαμβάνονται Αβίαστα",
		suite1_description3: "Από απαλές πετσέτες και μπουρνούζια έως κλιματισμό, γρήγορο Wi-Fi και τηλεόραση επίπεδης οθόνης με streaming, κάθε άνεση είναι εξασφαλισμένη. Το διαμέρισμα διαθέτει επίσης ιδιωτική είσοδο, κομψό καθιστικό στη βεράντα και χαλαρωτική παραθαλάσσια διακόσμηση—ιδανικό για ζευγάρια, μεμονωμένους ταξιδιώτες ή μικρές οικογένειες.",
		suite1_Title4: "Μπαλκόνι με Εκπληκτική Θέα – Κάλυμνος, Ελλάδα",
		suite1_description4: "Ξυπνήστε με πανοραμική θέα στο Αιγαίο Πέλαγος και το εντυπωσιακό τοπίο της Πατέλας, απευθείας από το ιδιωτικό σας μπαλκόνι. Βρίσκεται στο όμορφο νησί της Καλύμνου και αυτός ο ήσυχος εξωτερικός χώρος είναι ιδανικός για τον πρωινό σας καφέ ή το κρασί το βράδυ, περιτριγυρισμένοι από φυσική ομορφιά και θαλάσσιο αεράκι.",

		suite2_Title1: "Μοντέρνα Μποέ Αρμονία με Νησιώτικη Άνεση",
		suite2_description1: "Μπείτε σε έναν υπερυψωμένο, κομψό χώρο ύπνου με φυσικές υφές και ανάλαφρους τόνους. Τα στοιχεία από μπαμπού, ο απαλός φωτισμός και τα επιλεγμένα ράφια συνθέτουν μια μοντέρνα αλλά ήρεμη ατμόσφαιρα—ιδανική για χαλάρωση μετά από μια ηλιόλουστη μέρα στην Κάλυμνο.",
		suite2_Title2: "Πανοραμικές Στιγμές στο Μπαλκόνι με Θέα τη Θάλασσα",
		suite2_description2: "Ξεκινήστε τη μέρα σας ή χαλαρώστε το βράδυ στο ευρύχωρο ιδιωτικό σας μπαλκόνι με εκπληκτική θέα στο γαλαζοπράσινο Αιγαίο. Με κομψό εξωτερικό καθιστικό και πινελιές πράσινου, είναι το ιδανικό σημείο για να απολαύσετε το αεράκι και τη νησιώτικη γοητεία του τοπίου.",
		suite2_Title3: "Το Ζεστό σας Καθιστικό Δίπλα στη Θάλασσα",
		suite2_description3: "Απολαύστε ήρεμες στιγμές στο άνετο καθιστικό με απαλούς ουδέτερους τόνους, χειροποίητη διακόσμηση και ένα ρουστίκ-κομψό τραπεζάκι. Η γήινη παλέτα και οι υφές αποπνέουν τη χαλαρότητα της νησιώτικης ζωής—κάνοντάς σας να νιώσετε σαν στο σπίτι σας από την πρώτη στιγμή.",
		suite2_Title4: "Ένα Πλήρως Εξοπλισμένο Νησιώτικο Κουζινάκι",
		suite2_description4: "Μαγειρέψτε και απολαύστε το φαγητό σας σε μια φωτεινή, ανοιχτή κουζίνα με μοντέρνες συσκευές, κομψά φωτιστικά και προσεγμένες ξύλινες λεπτομέρειες. Είτε ετοιμάζετε τοπικά προϊόντα είτε απολαμβάνετε ένα ποτήρι κρασί στον πάγκο, ο χώρος συνδυάζει λειτουργικότητα με ανεπιτήδευτο στυλ."
	},
};

const switchLanguage = (lang) => {
	document.querySelector("nav ul li:nth-child(1) a").textContent = translations[lang].suites;
	document.querySelector("nav ul li:nth-child(2) a").textContent = translations[lang].experience;
	document.querySelector("nav ul li:nth-child(3) a").textContent = translations[lang].gallery;
	document.querySelector("nav ul li:nth-child(4) a").textContent = translations[lang].contact;
	document.querySelector("#header .content .inner p").textContent = translations[lang].introText;

	document.querySelector("#main #experience h2").textContent = translations[lang].experience;
	//Get the first h3 from the experience section
	document.querySelector("#main #experience h3:nth-of-type(1)").textContent = translations[lang].experience_1_Title;
	document.querySelector("#main #experience p:nth-of-type(1)").textContent = translations[lang].experience_1_description;
	document.querySelector("#main #experience h3:nth-of-type(2)").textContent = translations[lang].experience_2_Title;
	document.querySelector("#main #experience p:nth-of-type(3)").textContent = translations[lang].experience_2_description;
	document.querySelector("#main #experience h3:nth-of-type(3)").textContent = translations[lang].experience_3_Title;
	document.querySelector("#main #experience p:nth-of-type(5)").textContent = translations[lang].experience_3_description;
	document.querySelector("#main #experience h3:nth-of-type(4)").textContent = translations[lang].experience_4_Title;
	document.querySelector("#main #experience p:nth-of-type(7)").textContent = translations[lang].experience_4_description;

	//Suite 1 Content
	document.querySelector("#main #intro #suite1 h3:nth-of-type(1)").textContent = translations[lang].suite1_Title1;
	document.querySelector("#main #intro #suite1 p:nth-of-type(1)").textContent = translations[lang].suite1_description1;
	document.querySelector("#main #intro #suite1 h3:nth-of-type(2)").textContent = translations[lang].suite1_Title2;
	document.querySelector("#main #intro #suite1 p:nth-of-type(2)").textContent = translations[lang].suite1_description2;
	document.querySelector("#main #intro #suite1 h3:nth-of-type(3)").textContent = translations[lang].suite1_Title3;
	document.querySelector("#main #intro #suite1 p:nth-of-type(3)").textContent = translations[lang].suite1_description3;
	document.querySelector("#main #intro #suite1 h3:nth-of-type(4)").textContent = translations[lang].suite1_Title4;
	document.querySelector("#main #intro #suite1 p:nth-of-type(4)").textContent = translations[lang].suite1_description4;

	//Suite 2 Content
	document.querySelector("#main #intro #suite2 h3:nth-of-type(1)").textContent = translations[lang].suite2_Title1;
	document.querySelector("#main #intro #suite2 p:nth-of-type(1)").textContent = translations[lang].suite2_description1;
	document.querySelector("#main #intro #suite2 h3:nth-of-type(2)").textContent = translations[lang].suite2_Title2;
	document.querySelector("#main #intro #suite2 p:nth-of-type(2)").textContent = translations[lang].suite2_description2;
	document.querySelector("#main #intro #suite2 h3:nth-of-type(3)").textContent = translations[lang].suite2_Title3;
	document.querySelector("#main #intro #suite2 p:nth-of-type(3)").textContent = translations[lang].suite2_description3;
	document.querySelector("#main #intro #suite2 h3:nth-of-type(4)").textContent = translations[lang].suite2_Title4;
	document.querySelector("#main #intro #suite2 p:nth-of-type(4)").textContent = translations[lang].suite2_description4;



	document.querySelector("input[type='submit']").value = translations[lang].sendMessage;
	document.querySelector("input[type='reset']").value = translations[lang].reset;
	// Experience
	document.querySelector("#climbing-description").textContent = translations[lang].climbingDescription;
	document.querySelector("#crystal-clear-waters").textContent = translations[lang].crystalClearWaters;
	document.querySelector("#sponge-diving-heritage").textContent = translations[lang].spongeDivingHeritage;
	document.querySelector("#local-cuisine").textContent = translations[lang].localCuisine;
};

document.getElementById("btn-en").addEventListener("click", () => switchLanguage("en"));
document.getElementById("btn-gr").addEventListener("click", () => switchLanguage("gr"));

function showSuite(n) {
	document.getElementById('suite1').style.display = n === 1 ? 'block' : 'none';
	document.getElementById('suite2').style.display = n === 2 ? 'block' : 'none';
	var btns = document.querySelectorAll('.suite-tabs .tab-btn');
	btns.forEach((btn, i) => btn.classList.toggle('active', i === n - 1));
}

(function($) {

	var	$window = $(window),
		$body = $('body'),
		$wrapper = $('#wrapper'),
		$header = $('#header'),
		$footer = $('#footer'),
		$main = $('#main'),
		$main_articles = $main.children('article');

	// Breakpoints.
		breakpoints({
			xlarge:   [ '1281px',  '1680px' ],
			large:    [ '981px',   '1280px' ],
			medium:   [ '737px',   '980px'  ],
			small:    [ '481px',   '736px'  ],
			xsmall:   [ '361px',   '480px'  ],
			xxsmall:  [ null,      '360px'  ]
		});

	// Play initial animations on page load.
		$window.on('load', function() {
			window.setTimeout(function() {
				$body.removeClass('is-preload');
			}, 100);
		});



	// Fix: Flexbox min-height bug on IE.
		if (browser.name == 'ie') {

			var flexboxFixTimeoutId;

			$window.on('resize.flexbox-fix', function() {

				clearTimeout(flexboxFixTimeoutId);

				flexboxFixTimeoutId = setTimeout(function() {

					if ($wrapper.prop('scrollHeight') > $window.height())
						$wrapper.css('height', 'auto');
					else
						$wrapper.css('height', '100vh');

				}, 250);

			}).triggerHandler('resize.flexbox-fix');

		}

	// Nav.
		var $nav = $header.children('nav'),
			$nav_li = $nav.find('li');

		// Add "middle" alignment classes if we're dealing with an even number of items.
			if ($nav_li.length % 2 == 0) {

				$nav.addClass('use-middle');
				$nav_li.eq( ($nav_li.length / 2) ).addClass('is-middle');

			}

	// Main.
		var	delay = 325,
			locked = false;

		// Methods.
			$main._show = function(id, initial) {

				var $article = $main_articles.filter('#' + id);

				// No such article? Bail.
					if ($article.length == 0)
						return;

				// Handle lock.

					// Already locked? Speed through "show" steps w/o delays.
						if (locked || (typeof initial != 'undefined' && initial === true)) {

							// Mark as switching.
								$body.addClass('is-switching');

							// Mark as visible.
								$body.addClass('is-article-visible');

							// Deactivate all articles (just in case one's already active).
								$main_articles.removeClass('active');

							// Hide header, footer.
								$header.hide();
								$footer.hide();

							// Show main, article.
								$main.show();
								$article.show();

							// Activate article.
								$article.addClass('active');

							// Unlock.
								locked = false;

							// Unmark as switching.
								setTimeout(function() {
									$body.removeClass('is-switching');
								}, (initial ? 1000 : 0));

							return;

						}

					// Lock.
						locked = true;

				// Article already visible? Just swap articles.
					if ($body.hasClass('is-article-visible')) {

						// Deactivate current article.
							var $currentArticle = $main_articles.filter('.active');

							$currentArticle.removeClass('active');

						// Show article.
							setTimeout(function() {

								// Hide current article.
									$currentArticle.hide();

								// Show article.
									$article.show();

								// Activate article.
									setTimeout(function() {

										$article.addClass('active');

										// Window stuff.
											$window
												.scrollTop(0)
												.triggerHandler('resize.flexbox-fix');

										// Unlock.
											setTimeout(function() {
												locked = false;
											}, delay);

									}, 25);

							}, delay);

					}

				// Otherwise, handle as normal.
					else {

						// Mark as visible.
							$body
								.addClass('is-article-visible');

						// Show article.
							setTimeout(function() {

								// Hide header, footer.
									$header.hide();
									$footer.hide();

								// Show main, article.
									$main.show();
									$article.show();

								// Activate article.
									setTimeout(function() {

										$article.addClass('active');

										// Window stuff.
											$window
												.scrollTop(0)
												.triggerHandler('resize.flexbox-fix');

										// Unlock.
											setTimeout(function() {
												locked = false;
											}, delay);

									}, 25);

							}, delay);

					}

			};

			$main._hide = function(addState) {

				var $article = $main_articles.filter('.active');

				// Article not visible? Bail.
					if (!$body.hasClass('is-article-visible'))
						return;

				// Add state?
					if (typeof addState != 'undefined'
					&&	addState === true)
						history.pushState(null, null, '#');

				// Handle lock.

					// Already locked? Speed through "hide" steps w/o delays.
						if (locked) {

							// Mark as switching.
								$body.addClass('is-switching');

							// Deactivate article.
								$article.removeClass('active');

							// Hide article, main.
								$article.hide();
								$main.hide();

							// Show footer, header.
								$footer.show();
								$header.show();

							// Unmark as visible.
								$body.removeClass('is-article-visible');

							// Unlock.
								locked = false;

							// Unmark as switching.
								$body.removeClass('is-switching');

							// Window stuff.
								$window
									.scrollTop(0)
									.triggerHandler('resize.flexbox-fix');

							return;

						}

					// Lock.
						locked = true;

				// Deactivate article.
					$article.removeClass('active');

				// Hide article.
					setTimeout(function() {

						// Hide article, main.
							$article.hide();
							$main.hide();

						// Show footer, header.
							$footer.show();
							$header.show();

						// Unmark as visible.
							setTimeout(function() {

								$body.removeClass('is-article-visible');

								// Window stuff.
									$window
										.scrollTop(0)
										.triggerHandler('resize.flexbox-fix');

								// Unlock.
									setTimeout(function() {
										locked = false;
									}, delay);

							}, 25);

					}, delay);


			};

		// Articles.
			$main_articles.each(function() {

				var $this = $(this);

				// Close.
					$('<div class="close">Close</div>')
						.appendTo($this)
						.on('click', function() {
							location.hash = '';
						});

				// Prevent clicks from inside article from bubbling.
					$this.on('click', function(event) {
						event.stopPropagation();
					});

			});

		// Events.
			$body.on('click', function(event) {

				// Article visible? Hide.
					if ($body.hasClass('is-article-visible'))
						$main._hide(true);

			});

			$window.on('keyup', function(event) {

				switch (event.keyCode) {

					case 27:

						// Article visible? Hide.
							if ($body.hasClass('is-article-visible'))
								$main._hide(true);

						break;

					default:
						break;

				}

			});

			$window.on('hashchange', function(event) {

				// Empty hash?
					if (location.hash == ''
					||	location.hash == '#') {

						// Prevent default.
							event.preventDefault();
							event.stopPropagation();

						// Hide.
							$main._hide();

					}

				// Otherwise, check for a matching article.
					else if ($main_articles.filter(location.hash).length > 0) {

						// Prevent default.
							event.preventDefault();
							event.stopPropagation();

						// Show article.
							$main._show(location.hash.substr(1));

					}

			});

		// Scroll restoration.
		// This prevents the page from scrolling back to the top on a hashchange.
			if ('scrollRestoration' in history)
				history.scrollRestoration = 'manual';
			else {

				var	oldScrollPos = 0,
					scrollPos = 0,
					$htmlbody = $('html,body');

				$window
					.on('scroll', function() {

						oldScrollPos = scrollPos;
						scrollPos = $htmlbody.scrollTop();

					})
					.on('hashchange', function() {
						$window.scrollTop(oldScrollPos);
					});

			}

		// Initialize.

			// Hide main, articles.
				$main.hide();
				$main_articles.hide();

			// Initial article.
				if (location.hash != ''
				&&	location.hash != '#')
					$window.on('load', function() {
						$main._show(location.hash.substr(1), true);
					});

})(jQuery);